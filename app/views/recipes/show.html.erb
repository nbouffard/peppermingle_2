<div class="recipe-page">
  <div class="recipe-container">
    <div class="recipe-column-left">
      <div class="container">
        <div class="back-button">
          <%= link_to "Back", :back, class: "button small-button" %>
        </div>
        <h1><%= @recipe.title %></h1>
        <%= render partial: 'shared/image_carousel' %>
        <p><%= @recipe.description %></p>

        <%= render partial: 'shared/recipe_card' %>
      </div>
    </div>
    <div class="recipe-column-right">
      <div class="container">
        <% if current_user == @recipe.user %>
          <div class="edit-button">
            <%= link_to "Edit Recipe", edit_recipe_path(@recipe), class: "button" %>
          </div>
          <div class="delete-button">
            <%= link_to "Delete Recipe", @recipe, method: :delete, data: { confirm: "Are you sure?" }, class: "button" %>
          </div>
        <% else %>
          <div class="signup-button">
            <button class="button">Sign Up for Event</button>
          </div>
        <% end %>

        <div class="user-profile">
          <div class="user-avatar"></div>
          <div class="user-details">
            <p class="username"><%= @recipe.user.user_name %></p>
            <%= link_to "View Profile", user_path(@recipe.user_id), class: "profile-link" %>
          </div>
        </div>

        <div class="other-recipes">
          <p>More recipes by <%= @recipe.user.user_name %></p>
            <div>
              <% @user_recipes.sample(3).each do |recipe| %>
                <%= render partial: 'shared/card_small', locals: { recipe: recipe, card_class: 'smaller-card' } %>
              <% end %>
              <br>
              <%= link_to "New Review", new_recipe_review_path(recipe_id: @recipe.id), class: 'btn btn-primary' %>
              <br>
              <br>
              <h2>User Reviews </h2>
              <br>

              <% @recipe.reviews.each do |review| %>
                <div>
                  <h3><%= review.user.user_name %></h3>
                  <p><strong>Rating:</strong> <%= review.rating %></p>
                  <p><strong>Content:</strong> <%= review.content %></p>
                  <p><strong>suggestion:</strong> <%= review.suggestion %></p>
                </div>
              <% end %>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>
